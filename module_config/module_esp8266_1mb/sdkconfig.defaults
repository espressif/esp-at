# The Optimized Configuration
# Do NOT edit unless you know exactly what you are doing

CONFIG_IDF_TARGET_ESP8266=y

# Serial flasher config
CONFIG_ESPTOOLPY_FLASHMODE_DOUT=y
CONFIG_ESPTOOLPY_FLASHMODE="dout"
CONFIG_ESPTOOLPY_FLASHFREQ_80M=y
CONFIG_ESPTOOLPY_FLASHFREQ="80m"
CONFIG_ESPTOOLPY_FLASHSIZE_1MB=y
CONFIG_ESPTOOLPY_MONITOR_BAUD_115200B=y

# Partition Table
CONFIG_PARTITION_TABLE_CUSTOM=y
CONFIG_PARTITION_TABLE_CUSTOM_FILENAME="module_config/module_esp8266_1mb/partitions_at.csv"
CONFIG_PARTITION_TABLE_FILENAME="module_config/module_esp8266_1mb/partitions_at.csv"
CONFIG_COMPILER_OPTIMIZATION_LEVEL_DEBUG=y

# PHY
CONFIG_ESP_PHY_INIT_DATA_IN_PARTITION=n
CONFIG_ESP8266_PHY_MAX_WIFI_TX_POWER=21

# AT Customized Partitions
CONFIG_AT_CUSTOMIZED_PARTITION_TABLE_FILE="module_config/module_esp8266_1mb/at_customize.csv"
CONFIG_AT_CUSTOMIZED_PARTITION_TABLE_OFFSET=0x18000

# ESP8266-specific
CONFIG_ESP8266_DEFAULT_CPU_FREQ_160=y
CONFIG_ESP8266_DEFAULT_CPU_FREQ_MHZ=160

# Common ESP-related
CONFIG_ESP_ERR_TO_NAME_LOOKUP=n
CONFIG_ESP_CONSOLE_UART_CUSTOM=y
CONFIG_ESP_CONSOLE_UART_CUSTOM_NUM_1=y
CONFIG_ESP_CONSOLE_UART_NUM=1
CONFIG_ESP_CONSOLE_UART_BAUDRATE=115200
CONFIG_EVENT_LOOP_STACK_SIZE=1536

# Power Management
CONFIG_PM_ENABLE=y

# FreeRTOS
CONFIG_FREERTOS_HZ=1000
CONFIG_USE_QUEUE_SETS=y
CONFIG_FREERTOS_TIMER_STACKSIZE=1536

# LWIP
CONFIG_LWIP_SO_REUSE=y
CONFIG_LWIP_SO_RCVBUF=y
CONFIG_LWIP_DHCP_MAX_NTP_SERVERS=3
CONFIG_LWIP_IP_FRAG=y
CONFIG_LWIP_IP_REASSEMBLY=y
CONFIG_LWIP_TCP_MAXRTX=6
CONFIG_LWIP_TCP_SYNMAXRTX=3
CONFIG_LWIP_RAW=y
CONFIG_LWIP_NETIF_LOOPBACK=y
CONFIG_ESP_LWIP_RECV_REST_DATA=y
CONFIG_TCP_HIGH_SPEED_RETRANSMISSION=y
CONFIG_LWIP_SO_LINGER=y
CONFIG_LWIP_IPV6=y
CONFIG_LWIP_IPV6_AUTOCONFIG=y
CONFIG_LWIP_TCP_MSS=1440
CONFIG_LWIP_TCP_SND_BUF_DEFAULT=2880
CONFIG_LWIP_TCP_WND_DEFAULT=5760

# mDNS
CONFIG_ENABLE_MDNS=y
CONFIG_MDNS_MAX_SERVICES=5

# wpa_supplicant	
CONFIG_LTM_FAST=n

# mbedTLS
CONFIG_MBEDTLS_SSL_OUT_CONTENT_LEN=4096
CONFIG_MBEDTLS_SSL_IN_CONTENT_LEN=16384
CONFIG_MBEDTLS_RSA_BITLEN_2048=y
CONFIG_MBEDTLS_DYNAMIC_BUFFER=y
CONFIG_MBEDTLS_DYNAMIC_FREE_PEER_CERT=y
CONFIG_MBEDTLS_DYNAMIC_FREE_CONFIG_DATA=y

# ESP-TLS
CONFIG_ESP_TLS_USING_MBEDTLS=y
CONFIG_ESP_TLS_PSK_VERIFICATION=y

# MQTT
CONFIG_MQTT_USE_CUSTOM_CONFIG=y
CONFIG_MQTT_BUFFER_SIZE=512
CONFIG_MQTT_TASK_STACK_SIZE=2048

# AT
CONFIG_AT_ENABLE=y
CONFIG_AT_BASE_ON_UART=y
CONFIG_AT_PROCESS_TASK_STACK_SIZE=1792
CONFIG_AT_SOCKET_TASK_STACK_SIZE=4096
CONFIG_AT_SSL_SERVER_SERVER_AUTH_CLIENT=n
CONFIG_AT_SSL_SERVER_CLIENT_AUTH_SERVER=n
CONFIG_AT_MQTT_COMMAND_SUPPORT=y
CONFIG_AT_OTA_SUPPORT=n
CONFIG_AT_SOCKET_MAX_CONN_NUM=5
CONFIG_ESP_AT_FW_VERSION="2.2.1"

# VFS
CONFIG_SUPPORT_TERMIOS=n

# Newlib
CONFIG_NEWLIB_LIBRARY_LEVEL_FLOAT_NANO=y

# LOG
CONFIG_LOG_DEFAULT_LEVEL_ERROR=y
